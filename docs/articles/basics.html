<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>wdman: Basics • wdman</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">wdman</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/johndharrison/wdman">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>wdman: Basics</h1>
                        <h4 class="author">John D Harrison</h4>
            
            <h4 class="date">2017-01-23</h4>
          </div>

    
    
<div class="contents">
<p>The goal of this vignette is to describe the basic functionality of the <code>wdman</code> package.</p>
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<html><body><a href="#introduction" class="anchor"> </a></body></html>Introduction</h2>
<p><code>wdman</code> (Webdriver Manager) is an R package that allows the user to manage the downloading/running of third party binaries relating to the webdriver/selenium projects. The package was inspired by a similar node package <a href="https://www.npmjs.com/package/webdriver-manager">webdriver-manager</a>.</p>
<p>The checking/downloading of binaries is handled by the <a href="https://github.com/johndharrison/binman">binman</a> package and the running of the binaries as processes is handled by the <a href="https://github.com/lbartnik/subprocess">subprocess</a> package.</p>
<p>The <code>wdman</code> package currently manages the following binaries:</p>
<ul>
<li><a href="http://selenium-release.storage.googleapis.com/index.html">Selenium standalone binary</a></li>
<li><a href="https://chromedriver.storage.googleapis.com/index.html">chromedriver</a></li>
<li><a href="http://phantomjs.org/download.html">PhantomJS binary</a></li>
<li><a href="https://github.com/mozilla/geckodriver/releases">geckodriver</a></li>
<li><a href="https://github.com/SeleniumHQ/selenium/wiki/InternetExplorerDriver">iedriver</a></li>
</ul>
<p>Associated with the above are five functions to download/manage the binaries:</p>
<ul>
<li>selenium(…)</li>
<li>chrome(…)</li>
<li>phantomjs(…)</li>
<li>gecko(…)</li>
<li>iedriver(…)</li>
</ul>
<p>The driver functions take a number of common arguments (verbose, check, retcommand) which we describe:</p>
<div id="verbosity" class="section level3">
<h3 class="hasAnchor">
<html><body><a href="#verbosity" class="anchor"> </a></body></html>Verbosity</h3>
<p>Each of the driver functions has a <code>verbose</code> argument which controls message output to the user. If <code>verbose = TRUE</code> then messages are relayed to the user to inform them when drivers are checked/downloaded/ran. The default value for the driver functions is <code>TRUE</code>.</p>
<pre><code>selServ &lt;- selenium(verbose = TRUE)

## checking Selenium Server versions:

## BEGIN: PREDOWNLOAD

## BEGIN: DOWNLOAD

## BEGIN: POSTDOWNLOAD

## checking chromedriver versions:

## BEGIN: PREDOWNLOAD

## BEGIN: DOWNLOAD

## BEGIN: POSTDOWNLOAD

## checking geckodriver versions:

## BEGIN: PREDOWNLOAD

## BEGIN: DOWNLOAD

## BEGIN: POSTDOWNLOAD

## checking phantomjs versions:

## BEGIN: PREDOWNLOAD

## BEGIN: DOWNLOAD

## BEGIN: POSTDOWNLOAD

selServ$stop()

## [1] TRUE</code></pre>
<p>versus’s</p>
<pre><code>selServ &lt;- selenium(verbose = FALSE)
selServ$stop()

## [1] TRUE</code></pre>
</div>
<div id="check-for-updates" class="section level3">
<h3 class="hasAnchor">
<html><body><a href="#check-for-updates" class="anchor"> </a></body></html>Check for updates</h3>
<p>Each driver function has a <code>check</code> argument. If <code>check= TRUE</code> the function will liaise with the driver repository for any updates. If new driver versions are available these will be downloaded. The <a href="https://github.com/johndharrison/binman">binman</a> package is used for this purpose.</p>
</div>
<div id="command-line-output" class="section level3">
<h3 class="hasAnchor">
<html><body><a href="#command-line-output" class="anchor"> </a></body></html>Command line output</h3>
<p>For diagnostic purposes each driver function has a <code>retcommand</code> argument. If <code>retcommand = TRUE</code> the command that would have been launched as a process is instead returned as a string. As an example:</p>
<pre><code>selCommand &lt;- selenium(retcommand = TRUE, verbose = FALSE, check = FALSE)
selCommand

## [1] "/usr/bin/java -Dwebdriver.chrome.driver=/home/john/.local/share/binman_chromedriver/linux64/2.27/chromedriver -Dwebdriver.gecko.driver=/home/john/.local/share/binman_geckodriver/linux64/0.13.0/geckodriver -Dphantomjs.binary.path=/home/john/.local/share/binman_phantomjs/linux64/2.1.1/phantomjs-2.1.1-linux-x86_64/bin/phantomjs -jar /home/john/.local/share/binman_seleniumserver/generic/3.0.1/selenium-server-standalone-3.0.1.jar -port 4567"</code></pre>
<pre><code>chromeCommand &lt;- chrome(retcommand = TRUE, verbose = FALSE, check = FALSE)
chromeCommand

## [1] "/home/john/.local/share/binman_chromedriver/linux64/2.27/chromedriver --port=4567 --url-base=wd/hub --verbose"</code></pre>
</div>
</div>
<div id="selenium-standalone" class="section level2">
<h2 class="hasAnchor">
<html><body><a href="#selenium-standalone" class="anchor"> </a></body></html>Selenium Standalone</h2>
<p>The <code>selenium</code> function manages the Selenium Standalone binary. It can check for updates at <a href="http://selenium-release.storage.googleapis.com/index.html" class="uri">http://selenium-release.storage.googleapis.com/index.html</a> and run the resulting binaries as processes.</p>
<div id="running-the-selenium-binary" class="section level3">
<h3 class="hasAnchor">
<html><body><a href="#running-the-selenium-binary" class="anchor"> </a></body></html>Running the Selenium binary</h3>
<p>The binary takes a port argument which defaults to <code>port = 4567L</code>. There are a number of optional arguments to use a particular version of the binaries related to browsers selenium may control. By default the <code>selenium</code> function will look to use the latest version of each.</p>
<pre><code>selServ &lt;- selenium(verbose = FALSE, check = FALSE)
selServ$process

## Process Handle
## command   : /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java -Dwebdriver.chrome.driver=/home/john/.local/share/binman_chromedriver/linux64/2.27/chromedriver -Dwebdriver.gecko.driver=/home/john/.local/share/binman_geckodriver/linux64/0.13.0/geckodriver -Dphantomjs.binary.path=/home/john/.local/share/binman_phantomjs/linux64/2.1.1/phantomjs-2.1.1-linux-x86_64/bin/phantomjs -jar /home/john/.local/share/binman_seleniumserver/generic/3.0.1/selenium-server-standalone-3.0.1.jar -port 4567
## system id : 105698
## state     : running</code></pre>
<p>The selenium function returns a list of functions and a handle representing the running process.</p>
<p>The returned <code>output</code>, <code>error</code> and <code>log</code> functions give access to the stdout/stderr pipes and the cumulative stdout/stderr messages rerspectively.</p>
<pre><code>selServ$log()

## $stderr
##  [1] "10:28:57.720 INFO - Selenium build info: version: '3.0.1', revision: '1969d75'"                                                                                          
##  [2] "10:28:57.721 INFO - Launching a standalone Selenium Server"                                                                                                              
##  [3] "2017-01-17 10:28:57.736:INFO::main: Logging initialized @186ms"                                                                                                          
##  [4] ""                                                                                                                                                                        
##  [5] "10:28:57.780 INFO - Driver provider org.openqa.selenium.ie.InternetExplorerDriver registration is skipped:"                                                              
##  [6] " registration capabilities Capabilities [{ensureCleanSession=true, browserName=internet explorer, version=, platform=WINDOWS}] does not match the current platform LINUX"
##  [7] "10:28:57.781 INFO - Driver provider org.openqa.selenium.edge.EdgeDriver registration is skipped:"                                                                        
##  [8] " registration capabilities Capabilities [{browserName=MicrosoftEdge, version=, platform=WINDOWS}] does not match the current platform LINUX"                             
##  [9] "10:28:57.781 INFO - Driver class not found: com.opera.core.systems.OperaDriver"                                                                                          
## [10] "10:28:57.782 INFO - Driver provider com.opera.core.systems.OperaDriver registration is skipped:"                                                                         
## [11] "Unable to create new instances on this machine."                                                                                                                         
## [12] "10:28:57.782 INFO - Driver class not found: com.opera.core.systems.OperaDriver"                                                                                          
## [13] "10:28:57.783 INFO - Driver provider com.opera.core.systems.OperaDriver is not registered"                                                                                
## [14] "10:28:57.784 INFO - Driver provider org.openqa.selenium.safari.SafariDriver registration is skipped:"                                                                    
## [15] " registration capabilities Capabilities [{browserName=safari, version=, platform=MAC}] does not match the current platform LINUX"                                        
## [16] "2017-01-17 10:28:57.815:INFO:osjs.Server:main: jetty-9.2.15.v20160210"                                                                                                   
## [17] ""                                                                                                                                                                        
## [18] "2017-01-17 10:28:57.836:INFO:osjsh.ContextHandler:main: Started o.s.j.s.ServletContextHandler@2ef5e5e3{/,null,AVAILABLE}"                                                
## [19] ""                                                                                                                                                                        
## [20] "2017-01-17 10:28:57.849:INFO:osjs.ServerConnector:main: Started ServerConnector@724af044{HTTP/1.1}{0.0.0.0:4567}"                                                        
## [21] ""                                                                                                                                                                        
## [22] "2017-01-17 10:28:57.851:INFO:osjs.Server:main: Started @301ms"                                                                                                           
## [23] ""                                                                                                                                                                        
## [24] "10:28:57.852 INFO - Selenium Server is up and running"                                                                                                                   
## 
## $stdout
## character(0)</code></pre>
<p>The <code>stop</code> function sends a signal that terminates the process:</p>
<pre><code>selServ$stop()

## [1] TRUE</code></pre>
</div>
<div id="available-browsers" class="section level3">
<h3 class="hasAnchor">
<html><body><a href="#available-browsers" class="anchor"> </a></body></html>Available browsers</h3>
<p>By default the <code>selenium</code> function includes paths to chromedriver/geckodriver/ phantomjs so that the Chrome/Firefox and PhantomJS browsers are available respectively. All versions (chromever, geckover etc) are given as “latest”. If the user passes a value of NULL for any driver it will be excluded.</p>
<p>On Windows operating systems the option to included the Internet Explorer driver is also given. This is set to <code>iedrver = NULL</code> so not ran by default. Set it to <code>iedrver = "latest"</code> or a specific version string to include it on your Windows.</p>
</div>
</div>
<div id="chrome-driver" class="section level2">
<h2 class="hasAnchor">
<html><body><a href="#chrome-driver" class="anchor"> </a></body></html>Chrome Driver</h2>
<p>The <code>chrome</code> function manages the Chrome Driver binary. It can check for updates at <a href="https://chromedriver.storage.googleapis.com/index.html" class="uri">https://chromedriver.storage.googleapis.com/index.html</a> and run the resulting binaries as processes.</p>
<p><strong>The <code>chrome</code> function runs the Chrome Driver binary as a standalone process. It takes a default <code>port</code> argument <code>port = 4567L</code>. Users can then connect directly to the chrome driver to drive a chrome browser.</strong></p>
<p>Similarly to the <code>selenium</code> function the <code>chrome</code> function returns a list of four functions and a handle to the underlying running process.</p>
<pre><code>cDrv &lt;- chrome(verbose = FALSE, check = FALSE)
cDrv$process

## Process Handle
## command   : /home/john/.local/share/binman_chromedriver/linux64/2.27/chromedriver --port=4567 --url-base=wd/hub --verbose
## system id : 105886
## state     : running</code></pre>
<pre><code>cDrv$log()

## $stderr
## character(0)
## 
## $stdout
## [1] "Starting ChromeDriver 2.27.440175 (9bc1d90b8bfa4dd181fbbf769a5eb5e575574320) on port 4567"
## [2] "Only local connections are allowed."</code></pre>
<pre><code>cDrv$stop()

## [1] TRUE</code></pre>
</div>
<div id="phantomjs" class="section level2">
<h2 class="hasAnchor">
<html><body><a href="#phantomjs" class="anchor"> </a></body></html>PhantomJS</h2>
<p>The <code>phantomjs</code> function manages the PhantomJS binary. It can check for updates at <a href="https://bitbucket.org/ariya/phantomjs/downloads" class="uri">https://bitbucket.org/ariya/phantomjs/downloads</a> and run the resulting binaries as processes.</p>
<p><strong>The <code>phantomjs</code> function runs the PhantomJS binary as a standalone process in webdriver mode. It takes a default <code>port</code> argument <code>port = 4567L</code>. Users can then connect directly to the “ghostdriver” to drive a PhantomJS browser. Currently the default <code>version</code> is set to <code>version = "2.1.1"</code>. At the time of writing <code>2.5.0-beta</code> has been released. It currently does not have an up-to-date version of ghostdriver associated with it. For this reason it will beunstable/unpredictable to use it in webdriver mode. </strong></p>
<p>Similarly to the <code>selenium</code> function the <code>phantomjs</code> function returns a list of four functions and a handle to the underlying running process.</p>
<pre><code>pjsDrv &lt;- phantomjs(verbose = FALSE, check = FALSE)
pjsDrv$process

## Process Handle
## command   : /home/john/.local/share/binman_phantomjs/linux64/2.1.1/phantomjs-2.1.1-linux-x86_64/bin/phantomjs --webdriver=4567 --webdriver-loglevel=INFO
## system id : 106709
## state     : running</code></pre>
<pre><code>pjsDrv$log()

## $stderr
## character(0)
## 
## $stdout
## [1] "[INFO  - 2017-01-17T19:16:41.984Z] GhostDriver - Main - running on port 4567"</code></pre>
<pre><code>pjsDrv$stop()

## [1] TRUE</code></pre>
</div>
<div id="gecko-driver" class="section level2">
<h2 class="hasAnchor">
<html><body><a href="#gecko-driver" class="anchor"> </a></body></html>Gecko Driver</h2>
<p>The <code>gecko</code> function manages the Gecko Driver binary. It can check for updates at <a href="https://github.com/mozilla/geckodriver/releases" class="uri">https://github.com/mozilla/geckodriver/releases</a> and run the resulting binaries as processes.</p>
<p><strong>The <code>gecko</code> function runs the Gecko Driver binary as a standalone process. It takes a default <code>port</code> argument <code>port = 4567L</code>. Users can then connect directly to the gecko driver to drive a firefox browser. Currently the default <code>version</code> is set to <code>version = "2.1.1"</code>.</strong></p>
<p><strong>A very IMPORTANT point to note is that geckodriver implements the W3C webdriver protocol which as at the time of writing is not finalised. Currently packages such as RSelenium implement the JSONwireprotocol which whilst similar expects different return from the underlying driver.</strong></p>
<p><strong>The geckodriver implementation like the W3C webdriver specification is incomplete at this point in time. </strong></p>
<p>Similarly to the <code>selenium</code> function the <code>gecko</code> function returns a list of four functions and a handle to the underlying running process.</p>
<pre><code>gDrv &lt;- gecko(verbose = FALSE, check = FALSE)
gDrv$process

## Process Handle
## command   : /home/john/.local/share/binman_geckodriver/linux64/0.13.0/geckodriver --port=4567 --log=info
## system id : 107783
## state     : running</code></pre>
<pre><code>gDrv$log()

## $stderr
## [1] "1484681330494\tgeckodriver\tINFO\tListening on 127.0.0.1:4567"
## 
## $stdout
## character(0)
</code></pre>
<pre><code>gDrv$stop()

## [1] TRUE</code></pre>
</div>
<div id="ie-driver" class="section level2">
<h2 class="hasAnchor">
<html><body><a href="#ie-driver" class="anchor"> </a></body></html>IE Driver</h2>
<p>The <code>iedriver</code> function manages the Internet Explorer Driver binary. It can check for updates at <a href="http://selenium-release.storage.googleapis.com/index.html" class="uri">http://selenium-release.storage.googleapis.com/index.html</a> and run the resulting binaries as processes (the iedriver is distributed currently with the Selenium standalone binary amongst other files).</p>
<p><strong>The <code>chrome</code> function runs the Chrome Driver binary as a standalone process. It takes a default <code>port</code> argument <code>port = 4567L</code>. Users can then connect directly to the chrome driver to drive a chrome browser.</strong></p>
<p><strong>Please note that additional settings are required to drive an Internet Explorer browser. Security settings and zoom level need to be set correctly in the browser. The author of this document needed to set a registry entry (for ie 11). This is outlined at <a href="https://github.com/SeleniumHQ/selenium/wiki/InternetExplorerDriver" class="uri">https://github.com/SeleniumHQ/selenium/wiki/InternetExplorerDriver</a> in the required configuration section.</strong></p>
<p>Similarly to the <code>selenium</code> function the <code>gecko</code> function returns a list of four functions and a handle to the underlying running process.</p>
<pre><code>ieDrv &lt;- iedriver(verbose = FALSE, check = FALSE)
ieDrv$process

## Process Handle
## command   : C:\Users\john\AppData\Local\binman\binman_iedriverserver\win64\3.0.0\IEDriverServer.exe /port=4567 /log-level=FATAL /log-file=C:\Users\john\AppData\Local\Temp\RtmpqSdw94\file5247395f2a.txt
## system id : 7484
## state     : running
</code></pre>
<pre><code>ieDrv$log()

## $stderr
## character(0)
## 
## $stdout
## [1] "Started InternetExplorerDriver server (64-bit)"                                          
## [2] "3.0.0.0"                                                                                 
## [3] "Listening on port 4567"                                                                  
## [4] "Log level is set to FATAL"                                                               
## [5] "Log file is set to C:\\Users\\john\\AppData\\Local\\Temp\\RtmpqSdw94\\file5247395f2a.txt"
## [6] "Only local connections are allowed"</code></pre>
<pre><code>ieDrv$stop()

## [1] TRUE
</code></pre>
</div>
<div id="issues-and-problems" class="section level2">
<h2 class="hasAnchor">
<html><body><a href="#issues-and-problems" class="anchor"> </a></body></html>Issues and problems</h2>
<p>If you experience issues or problems running one of the drivers/functions please try running the command in a terminal on your OS initially.</p>
<p>You can access the command to run by using the <code>retcommand</code> argument in each of the main package functions.</p>
<p>If you continue to have problems consider posting an issue at <a href="https://github.com/johndharrison/wdman/issues" class="uri">https://github.com/johndharrison/wdman/issues</a></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#selenium-standalone">Selenium Standalone</a></li>
      <li><a href="#chrome-driver">Chrome Driver</a></li>
      <li><a href="#phantomjs">PhantomJS</a></li>
      <li><a href="#gecko-driver">Gecko Driver</a></li>
      <li><a href="#ie-driver">IE Driver</a></li>
      <li><a href="#issues-and-problems">Issues and problems</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by John Harrison.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
